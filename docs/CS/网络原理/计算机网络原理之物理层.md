# 计算机网络原理之物理层

<Badges :content="[{type: 'tip', text:'计算机网络'}]" />

## 目录

[[TOC]]

## 韩立刚计算机网络：物理层

<Pdf src="/韩立刚计算机网络/第02章 物理层。pdf" />

## 物理层的基本概念

物理层（Physical Layer），是OSI的第一层，它虽然处于最底层，却是整个开放系统的基础。物理层为设备之间的数据通信提供**传输媒体及互连设备**，为数据传输提供可靠的环境。

### 媒体和互连设备

物理层的媒体包括架空明线、平衡电缆、光纤、无线信道等。通信用的互连设备指DTE和DCE间的互连设备。DTE即数据终端设备，又称物理设备，如计算机、终端等都包括在内。而DCE则是数据通信设备或电路连接设备，如调制解调器等。数据传输通常是经过DTE──DCE，再经过DCE──DTE的路径。互连设备指将DTE、DCE连接起来的装置，如各种插头、插座。

LAN中的各种粗细同轴电缆、T型接、插头，接收器，发送器，中继器等都属物理层的媒体和连接器。

### 物理层的主要功能

- 为数据端设备提供传送数据的通路。数据通路可以是一个物理媒体，也可以是多个物理媒体连接而成。一次完整的数据传输，包括**激活物理连接**、**传送数据**、**终止物理连接**。所谓激活，就是不管有多少物理媒体参与，都要在通信的两个数据终端设备间连接起来，形成一条通路。
- 传输数据。物理层要形成适合数据传输需要的实体，为数据传送服务。一是要保证数据能在其上正确通过，二是要提供足够的带宽(带宽是指每秒钟内能通过的比特(BIT)数)，以减少信道上的拥塞。传输数据的方式能满足点到点，一点到多点，串行或并行，半双工或全双工，同步或异步传输的需要。
- 完成物理层的一些管理工作。
- 物理层定义了与传输媒体的接口有关的一些特性。

### 定义传输媒体接口的特性

物理层解决如何在连接各种计算机传输媒体上传输bit流。物理层主要任务是**确定传输媒体接口的一些特性**（为了统一规划，标准化，各个厂商生产一致，可以通用）。

- **机械特性**：接口形状、大小、引线数目、网线内有几根线。
- **电气特性**：例如规定电压范围。
- **功能特性**：例如规定-5V表示0 +5V表示1（电压信号代表数字信号）。
- **过程特性**：（规程特性）规定建立连接时各个部件的工作步骤。

## 数据通信的基础知识

### 数据通信系统

数据通信(data communication) 是在两台设备之间通过诸如线缆的某种形式的传输介质进行的数据交换。因为数据通信的发生，通信设备必然成为由软(程序)硬(物理设备)件结合组成的通信系统的一部分。数据通信系统的效率取决于四个关键因素:传递性、准确性、及时性和抖动性。

- 传递性。系统必须将数据传递到正确的目的地。数据必须由而且只能由预定的设备或用户接收。
- 准确性。系统必须准确地传递数据。在传递过程中发生改变和不正确的数据都是不可用的。
- 及时性。系统必须以及时的方式传递数据。传递延误的数据是无用的。就视频和音频数据而言，及时传递意味着在数据产生时就传递数据，所传递数据的顺序和产生时的顺序相同，而且没有明显的延迟。这种传递称为实时传输。
- 抖动性。抖动是指分组到达时间的变化，音频或视频的分组在传递过程中延迟各不相同。比如，假定每30ms发送一个视频的分组，其中某些分组到达延时30ms ，而另一些分组延时40ms 引起视频不均匀后果。

数据通信系统需要有五个组成部分：

![image](https://cdn.staticaly.com/gh/jonsam-ng/image-hosting@master/20220921/image.bxhynj7dqh.webp)

- 报文(message) 是进行通信的信息(数据) ，它可以是文本、数字、图片、声音、视频等信息形式。
- 发送方(sender) 是指发送数据报文的设备，它可以是计算机、工作站、手机、摄像机等。
- 接收方(receiver) 是指接收报文的设备，它可以是计算机、工作站、手机、电视等。
- 传输介质(transmission medium) 是报文从发送方到接收方之间所经过的物理通路，它可以是双绞线、同轴电缆、光纤和无线电波。
- 协议(protocol) 是管理数据通信的一组规则，它表示通信设备之间的一组约定。如果没有协议，即使两台设备之间可能是连接的，那也无怯通信，就像一个说陆语的人无陆被一个只说日语的人理解一样。再正式一点的说法是，两者通信的时候交换的报文的格式和次序，以及在接收或者发送报文，或者其他事情时候，采取的动作。

### 数据通信模型

一个数据通信系统抽象来看分为三大部分：

- 源系统（或发送端、发送方）
- 传输系统（或传输网络）
- 目的系统（或接收端、接收方）

数据通信系统模型如下：

![image](https://cdn.staticaly.com/gh/jonsam-ng/image-hosting@master/20220921/image.59blgsgf8fc0.webp)

调制解调器有2个功能：

- 调制：将计算机发出的低频数字信号转换成传输媒介可以传输的模拟信号。
- 解调：将来自传输媒介的模拟信号转换成计算机能识别的数字信号。

通信、数据、信号的关系：

- 通信的目的是传送消息，如语音，文字，图像，视频等都是消息。
- 数据是运送消息的实体。
- 信号是数据的电气或电磁的表现。

信号可以分为两类：

- 模拟信号：代表消息的参数的取值是**连续**的，如上图用户家中的调制解调器到电话端局之间的用户线上传送的就是模拟信号。
- 数字信号：代表消息的参数的取值是**离散**的，如上图用户家中的计算机到调制解调器之间，或电话网中继线上传送的就是数字信号。

码元：

在使用时间域（时域） 的波形表示数字信号时，代表不同离散数值的基本波形就是码元。使用二进制编码时，只有**两种不同的码元**，一种代表 0态 ，一种代表 1 态。此外，一个码元所携带的信息量是不固定的，由调制方式和编码方式决定。

### 相关术语

- 信息（Message）：通信的目的是传送信息，如文字、图像、视频和音频等都是消息。
- 数据（Data）：信息在传输之前需要进行编码，编码后的信息就变成数据。
- 信号（signal）：数据在通信线路上传递需要变成电信号或光信号。
- 模拟信号：代表消息的参数取值连续。
- 数字信号：代表消息的参数取值离散。
- **码元（code）** ：在使用时间域的波形表示数字信号时，则代表不同离散数值的基本波形就称为码元。在数字通信中常常用时间间隔相同的符号来表示一个二进制数字，这样的时间间隔内的信号称为**二进制码元**，而这个间隔被称为**码元长度**，1码元可以携带n bit的信息量。

::: tip 为什么1码元可以携带n bit的信息量？
如果信号一共用2的n次方种可能，那么1码元代表nbit信息。

如果信号一共用2种可能，那么1码元代表1bit信息（只有高低电平）
如果信号一共用4种可能，那么1码元代表2bit信息，00 01 10 11，码元有四种可能，一码元代表2bit。
:::

### 有关信道的几个基本概念

信道一般表示向一个方向传送的信息的媒体。所以咱们说平常的信息线路往往包含一条发送信息的信道和一条接受信息的信道。
**单向通信** （单工通信）–只能发送或只能接收
例子：电视塔发送电视信号，但是电视无法向电视塔发送信号
**双向交替通信** （半双工通信）–双方可以收发，但是不能同时发送或同时接收
**双向同时通信** （全双工通信）–通信的双方可以同时发送和接收消息
例子：打电话
计算机通信大多数是半双工和全双工通信

**基带信号** （baseband）和 **带通信号** （band pass）
前提：信号是会衰减的，比如人说话，当距离较远之后，声音就会听不到。
**基带信号** （baseband）：来自信息源的信号。
**带通信号** （band pass）：把基带信息经过载波调制后的信号（载波调制就是把信号的频率搬到较高的频段，以便传输）
因此，如果传输距离短，信息衰减可以接受，那就直接使用基带信号，如果距离长，信号衰减大，那就得通过调制将基带信号转换为带通信号，以减小衰减，接收方收到后再进行解调，分析成基带信号进行解读。

**几种基本调制方法** ：
调幅
调频
调相
具体见图：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080923486.png)

（数字信号的） **编码格式** ：
单极性不归零码
双极性不归零码
单极性归零码
双极性归零码
**归零码** ：一次信号结尾始终为0电压 不归零码：一次信号结尾不需要归零
**单极性** ：只有正向和0电压 双极性：有正负电压
**曼彻斯特编码** ：低电平跳高电平代表0 高电平条低电平代表1，可以代表没有数据传输（用电平变化代表数据传输）
**差分曼彻斯特编码** ：0和1没有固定高低电平，后面的信号是几取决于前面的信号
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080946865.png)

**信道极限容量** ：信号波形在实际信道传输时，会受到带宽受限、噪声、干扰等引起失真。

**奈氏准则** ：在理想条件下，为了避免码间串扰（码元太短，无法识别高低电平），码元传输速率是有上限的（上一章带宽可以无限增加吗例子）
**信噪比** ：带宽受阻且有高斯白噪声干扰的信道的情况下，信道的极限无差错信息传输速率信道的极限信息传输速率C的计算公式：（ **香农公式** ）
C = Wlog2(1+S/N) b/s (log2是log以2为底)
W：信道带宽（单位Hz）
S：信道内所传信号的平均功率
N：信道内部高斯噪声功率
**香农公式的结论** ：
1信道的带宽或信道的信噪比(S/N)越大，信息极限传输速率越高，若W或S/N没有上限，则C没有上限（实际不可能）
2只要信息传输速率低于信道极限信息传输速率，则一定可以找到方法确保数据的无差错传输
实际上信道所能达到的速率比香农公式计算出的低不少

例子：每分钟说200字，外面有噪声，降低说话速度，来确保收听者听到
又例如：无线网的衰减：路由器和计算机在相同房间，计算机速率150M，计算机搬到隔壁，速率只剩下100M，因为隔了一道墙，要确保可靠传输就要降低速率，墙可以理解为噪声。
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080955663.png)

## 物理层下面的传输媒体

导向传输媒体：电磁波沿着固体介质传播
![在这里插入图片描述](https://img-blog.csdnimg.cn/202012190810070.png)

**双绞线**

- 屏蔽双绞线STP（铜线绞在一起，避免电流相互作用，减少干扰）
- 无屏蔽双绞线UTP（比上面多了一层绝缘层，避免外界干扰）

**同轴电缆** （结构和有线电视的电线一样）

- 50欧姆同轴电缆用于数字传输，多用于基带传输，也叫基带同轴电缆
- 75欧姆同轴电缆用于模拟传输，即宽带同轴电缆

**光缆**
单模光纤
多模光纤
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219081015693.png)

**非导向传输媒体** （无线传输）：无线传输所使用的频段很广。
短波通信主要是靠电离层的反射，但短波信道的通信质量较差。
微波在空间主要是直线传播。

- 地面微波接力通信
- 卫星通信

## 信道复用技术

目的：多用户同时传输，不会相互影响。提高信道利用率
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219081023953.png)

**频分复用 FDM(Frequency Division Multiplexing)**
用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。
频分复用的所有用户在同样的时间占用不同的带宽资源（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。
解释：特定的用户使用特定的频率波段，传输时采用不同频率的波段进行调制和解调，已达到区分其他数据的目的
**时分复用TDM(Time Division Multiplexing)**
时分复用则是将时间划分为一段段等长的时分复用帧（TDM 帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。
每一个用户所占用的时隙是周期性地出现（其周期就是 TDM 帧的长度）。
TDM 信号也称为等时(isochronous)信号。
时分复用的所有用户是在不同的时间占用同样的频带宽度。
时分复用可能会造成线路资源的浪费 ：
使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。
**统计时分复用 STDM(Statistic TDM)**
与时分复用类似，只不过每次发送时标记是哪个用户发出的，解析时按标记解析。可以避免线路资源的浪费
**波分复用 WDM(Wavelength Division Multiplexing)**
波分复用就是光的频分复用。
**码分复用 CDM(Code Division Multiplexing)**
常用的名词是码分多址 CDMA (Code Division Multiple Access)。
各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。 每一个比特时间划分为 m 个短的间隔，称为码片(chip)。

## 数字传输系统

**脉码调制 PCM 体制** ：最初是为了在电话局之间的中继线上传送多路的电话。
由于历史上的原因，PCM 有两个互不兼容的国际标准，即北美的 24 路 PCM（简称为 T1）和欧洲的 30 路 PCM（简称为 E1）。我国采用的是欧洲的 E1 标准。
E1 的速率是 2。048 Mb/s，而 T1 的速率是 1。544 Mb/s。当需要有更高的数据率时，可采用复用的方法。
E1取样8000次/s 每个码元代表8位bit E1 采用时分复用技术 32路同时传输
8*8000*32 = 2。048Mb/s
T1只有24路同时传播，且有控制信号
8*8000*24+8K=1。544Mb/s(8K表示控制信号)

## 宽带接入技术

**ADSL** (Asymmetric Digital Subscriber Line)：非对称数字用户线（就是通过电话线上网）
用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。把 0~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。
**ADSL**实现原理采用DMT技术
DMT 调制技术采用频分复用的方法，把 40 kHz 以上一直到 1。1 MHz 的高端频谱划分为许多的子信道，其中 25 个子信道用于上行信道，而 249 个子信道用于下行信道。每个子信道占据 4 kHz 带宽（严格讲是 4。3125 kHz），并使用不同的载波（即不同的音调）进行数字调制。这种做法相当于在一对用户线上使用许多小的调制解调器并行地传送数据。
![在这里插入图片描述](https://img-blog.csdnimg.cn/2020121908103317.png)

ADSL上网图解：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219081052766.png)

光纤同轴混合网 **HFC** (Hybrid Fiber Coax)（就是利用有线电视线路上网）
HFC 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。现有的 CATV 网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。而 HFC 网则需要对 CATV 网进行改造。
**HFC 的主要特点**
HFC网的主干线路采用光纤
HFC 网将原 CATV 网中的同轴电缆主干部分改换为光纤，并使用模拟光纤技术。
在模拟光纤中采用光的振幅调制 AM，这比使用数字光纤更为经济。
模拟光纤从头端连接到光纤结点(fiber node)，即光分配结点 ODN (Optical Distribution Node)。在光纤结点光信号被转换为电信号。在光纤结点以下就是同轴电缆
HFC结构示意图

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020121908105979.png)

## 来源文章

- [物理层_百度百科](https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E5%B1%82/4329158)
