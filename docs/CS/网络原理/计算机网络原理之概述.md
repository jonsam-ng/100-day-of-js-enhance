# 计算机网络原理之概述

<Badges :content="[{type: 'tip', text:'计算机网络'}]" />

## 目录

[[TOC]]

## 韩立刚计算机网络：介绍计算机网络

<Pdf src="/韩立刚计算机网络/第01章 介绍计算机网络.pdf" />

### 从TCP/IP协议看分层思想

在 OSI 七层模型（或者工程中的五层模型）中，TCP协议和IP协议分别位于传输层和网络层，这里是典型的利用了分层的思想。对于分层，其实在众多大型的项目之中都应用很广。和分治的思想类型，分层在解决复杂问题时往往能够起到四两拨千斤的效果。

如下为分层思想在解决网络通信问题上的应用：

![image](https://cdn.staticaly.com/gh/jonsam-ng/image-hosting@master/20220920/image.56fippg7mjg0.webp)

<img src="https://cdn.staticaly.com/gh/jonsam-ng/image-hosting@master/20220920/image.56fippg7mjg0.webp" data-zooming/>

我们可以总结出分层思想所解决的问题之特征：

- 

## 局域网

- 覆盖范围小，自己单位维护，带宽固定（由硬件决定） 100米 带宽小
- 多台计算机连接到接入层交换机，多台接入层交换机连接到汇聚层交换机
- 每一层都是一个星型结构

**接入层交换机** ：接入口多
**汇聚层交换机** ：连接各个接入层交换机，端口带宽高

# 广域网

距离远 花钱买服务 花钱租带宽

**ISP** （Internet Server Provider）网络服务提供商
自己的机房 对网民提供Internet服务
运营的网站放在运营商服务器机房
运营商直之间只有一条线路连接，所以这条线路会成为通信速率瓶颈，也是为什么我们跨运营商访问网站比较慢的原因

**物理地址的作用** ：数据传输时记录当前物理地址和下次的传输物理地址
**IP地址的作用** ：记录当前IP地址和目标IP地址

# OSI参考模型

**应用层** 能产生流量的程序
**表示层** 加密 压缩等处理 传输格式（二进制 ASCII码）乱码是表示层问题（开发者处理）
**会话层** 可以查木马 netstat -n查看链接状态 netstat -nb 查看连接由谁创建
**传输层** 可靠传输 流量控制 不可靠传输
**网络层** 选择最佳路径 规划IP地址
**数据链路层** 标记帧的开始和结束 透明传输 差错校验 交换机速度
**物理层** 网络设备接口标准 电器（气？）标准 如何在物理链路进行更快的传输（电压 接口数量 接口类型 通信介质：光纤 网线 双绞线）

**分层的好处** ：7层相互独立，某一层变化不会影响其他层（相当于软件开发的耦合性小的意思）
比如在应用程序写入服务器的IP地址是不符合分层的思想的，万一服务器的IP地址修改 应用程序就挂了（IP地址是网络层的内容，应用程序属于应用层）
**各层关系** ：低层向高层提供服务

# OSI架构图

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200425104644679.jpg)

# 各层间的数据传输

数据封装
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080529572.png)

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080547223.png)

下图来自谢希仁第五版的PPT，侵删（途中的五层架构，就是OSI架构图右侧的五层架构）
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080558322.gif)

# 网络排错

从底层向上排除
1.物理层故障：网络连接状态 查看发送和接收数据包
2.数据链路层故障：MAC地址冲突 ADSL欠费 网速无法协商 计算机连接到错误的VLAN
3.网络层故障：配置了错误的IP 子网掩码 网关，路由器没有配置可达目标的路由
4.应用层故障：（上四层都在这里说）应用程序配置错误（如如浏览器配置了错误的代理）

# OSI网络参考模型和网络安全的例子

**1.物理层安全** 一栋大厦是保险公司的，建造时布好网线，使用时10层租给了其他公司，其他公司通过原先布好的网线就可以访问保险公司网络。（别人应该无法私自连接到你的网络，租售10层时 应将网线断开服务器，或配置将网络断开）
**2.数据链路层安全** 上网时 ADSL 上网账号密码 VLAN划分 交换机绑定固定MAC地址
**3.网络层安全** 路由器上使用ACL控制数据包流量（指定IP才传输） 防火墙设置
**4.应用层安全** 开发的应用程序没有漏洞（比如没有SQL注入漏洞等等）

# 计算机网络性能指标

**1.速率**
连接在计算机网络上的主机在数字信道上传送数据位数的速率（data rate，bit rate）单位为b/s,kb/s,Mb/s,Gb/s
这就是我们常说的“我家装的100M的带宽”，不过，有些网站测速显示的速率是按字节来表示的，即需要拿100M/8得到网站显示数据
还有交换机的带宽为100M，100M其实是100Mb/s
**2.带宽**
数据通信中，数字信道所能传输的最高速率，单位为b/s,kb/s,Mb/s,Gb/s
注意，这也是一个速率，只不过是最大速率，和上面的理解几乎一样，多数情况受硬件限制
**3.吞吐量**
单位时间内通过某个网络数据量（有可能是几条数据链路流量和）
**4.时延**
也就是我们平时玩游戏说的延时
时延包括 发送时延 传播时延 处理时延 排队时延
发送时延 = 数据块长度（bit）/信道带宽（bit/s）=N s
加带宽是减少发送时延 传播速度由介质介质决定，介质固定，传播速度固定
**带宽可以无限增加吗？**
不可以：数据块长度固定，增加带宽意味着发送时间变短，同时数据块在信道中的长度也变短了（波形长度 = 发送时间 * 传播速度），之前说过传播速度由介质决定，一般固定，那么发送时间越短，波形越短，短到一定程度，接收方就无法识别高低电平了
**铜线和光纤的对比：**
铜线的传播速率其实和光纤的速率接近，那为什么使用光纤呢？因为光纤支持更高的发送速率，光纤使用光信号，即使数据很短，也能解析出高低电平。而铜线使用电信号，波形太短，无法识别高低电平。
5.时延带宽积=传播时延*带宽
6.往返时间（RTT Round-Trip Time）
ping出的时间就是往返时间 >2000ms请求超时
**7.利用率**
![在这里插入图片描述](https://img-blog.csdnimg.cn/20201219080635246.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlZVFpYW5nODAyMw==,size_16,color_FFFFFF,t_70)

最形象的例子是汽车和公路。以汽车类比数据块，以高速公路类比网络光纤。当汽车较少时，利用率较低，但汽车开的很快，延时较低。如果遇到节假日，高速公路塞满了汽车，公路利用率高了，同时延时也高了，因为车已经开不快了，堵车啊。。。
