# 计算机网络原理之数据连输层

<Badges :content="[{type: 'tip', text:'计算机网络'}]" />

## 目录

[[TOC]]

## 韩立刚计算机网络：数据链路层

<Pdf src="/韩立刚计算机网络/第04章 数据链路层.pdf" />

3.1 使用点对点信道的数据链路层
-----------------

### 3.1.1 数据链路层和帧

****数据发送模型****  
![](https://img-blog.csdnimg.cn/20200425225800499.gif)  
****数据链路层的信道类型****  
数据链路层使用的信道主要有以下两种类型：

*   点对点信道。这种信道使用一对一的点对点通信方式。
*   广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。

.  
.

**链路与数据链路**

*   ** 链路 (link)** 是一条无源的点到点的物理线路段，中间没有任何其他的交换结点。

> 一条链路只是一条通路的一个组成部分。

*   **数据链路 (data link)** 除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。

> *   现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。
> *   一般的适配器都包括了数据链路层和物理层这两层的功能。

**帧**

*   数据链路层传送的是**帧**  
    ![](https://img-blog.csdnimg.cn/20200425231742936.png)![](https://img-blog.csdnimg.cn/20200425231834393.png)

.  
.

### 3.1.2 三个基本问题

**1. 封装成帧**

*   **封装成帧 (framing)** 就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。确定帧的界限。
    
*   首部和尾部的一个重要作用就是进行**帧定界**。  
    ![](https://img-blog.csdnimg.cn/20200426172625769.png)
    
*   用控制字符进行帧定界的方法举例
    

> 试想：帧还未发送完，发送端出了问题，只能重发该帧。接收端却收到了前面的 “半截子帧”，它会抛弃吗？为什么？

![](https://img-blog.csdnimg.cn/20200426172811364.png)

**2. 透明传输**

> *   若传输的数据是 ASCII 码中 “可打印字符 (共 95 个)“集时，一切正常。
>     
> *   若传输的数据不是仅由” 可打印字符” 组成时，就会出问题，如下  
>     ![](https://img-blog.csdnimg.cn/20200426173915485.png)
>     

**用字节填充法解决透明传输问题**

*   发送端的数据链路层在数据中出现控制字符 “SOH” 或“EOT”的前面插入一个转义字符“ESC”(其十六进制编码是 1B)。
    
*   **字节填充** (byte stuffing) 或**字符填充** (character stuffing)——接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。
    
*   如果转义字符也出现数据当中，那么应在转义字符前面插入一个转义字符。当接收端收到连续的两个转义字符时，就删除其中前面的一个。
    
*   当传送的帧是用文本文件组成的帧时（文本文件中的字都是从键盘上输入的），其数据部分显然不会出现像 SOH 或 EOT 这样的帧定界控制字符。可见不管从键盘上输入什么字符都可以放在这样的帧中传输过去，因此这样的传输就是透明传输。  
    ![](https://img-blog.csdnimg.cn/20200426174326691.png)
    

.  
.  
**3. 差错控制**

*   在传输过程中可能会产生**比特差错**：1 可能会变成 0 而 0 也可能变成 1。
    
*   在一段时间内，传输错误的比特占所传输比特总数的比率称为**误码率** BER (Bit Error Rate)。
    
*   误码率与信噪比有很大的关系。
    
*   为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。
    

**循环冗余检验的原理**

*   在数据链路层传送的帧中，广泛使用了**循环冗余检验** CRC 的检错技术。
    
*   在发送端，先把数据划分为组。假定每组 _k_ 个比特。
    
*   假设待传送的一组数据 _M_ = 101001（现在 _k_ = 6）。我们在 _M_ 的后面再添加供差错检测用的 _n_ 位**冗余码**一起发送。
    

**冗余码的计算**

*   用二进制的模 2 运算进行 2_n_ 乘 _M_ 的运算，这相当于在 _M_ 后面添加 _n_ 个 0。
    
*   得到的 (_k_ + _n_) 位的数除以事先选定好的长度为 (_n_ + 1) 位的**除数** _P_，得出**商**是 _Q_ 而余数是 _R_，**余数** _R_ 比除数 _P_ 少 1 位，即 _R_ 是 _n_ 位。
    

**冗余码的计算举例**

> 现在 _k_ = 6, _M_ = 101001。  
> 设 _n_ = 3, 除数 _P_ = 1101，  
> 被除数是 2_n**M_ = 101001000。  
> 模 2 运算的结果是：商 _Q_ = 110101，  
> 余数 _R_ = 001。  
> 把余数 _R_ 作为冗余码添加在数据 _M_ 的后面发送出去。发送的数据是：2_n**M_ + _R_  
> 即：101001001，共 (_k_ + _n_) 位。

**循环冗余检验的原理说明**  
![](https://img-blog.csdnimg.cn/20200426190323318.png)  
**帧检验序列 FCS**  
在数据后面添加上的冗余码称为**帧检验序列** FCS (Frame Check Sequence)。

循环冗余检验 CRC 和帧检验序列 FCS 并不等同。

*   CRC 是一种常用的**检错方法**，而 FCS 是添加在数据后面的**冗余码**。
    
*   FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。
    

**接收端对收到的每一帧进行 CRC 检验**

*   (1) 若得出的余数 _R_ = 0，则判定这个帧没有差错，就**接受** (accept)。
    
*   (2) 若余数 _R_ ≠ 0，则判定这个帧有差错，就**丢弃**。
    
*   但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。  
    只要经过严格的挑选，并使用位数足够多的除数 _P_，那么出现检测不到的差错的概率就很小很小。
    

**补零位数比除数位数少一**

> 异或运算  
> 1+1=0 1+0=0 0+1=0 0+0=0

**除数由两台计算机数据链路层协议决定**

****小结：CRC 差错检测技术****  
仅用循环冗余检验 CRC 差错检测技术只能做到**无差错接受** (accept)。

*   “无差错接受” 是指：“凡是接受的帧（**即不包括丢弃的帧**），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。
    
*   要做到 “**可靠传输**”（即发送什么就收到什么）就必须再加上**确认**和**重传**机制。
    
    *   考虑：帧重复、帧丢失、帧乱序的情况

可以说 “CRC 是一种**无比特差错**，而不是**无传输差错**的检测机制”  
OSI/RM 模型的观点: 数据链路层要做成无传输差错的! 但这种理念目前不被接受。

.  
.  
.

数据链路层的信道类型
==========

• 数据链路层使用的信道主要有以下两种类型：

*   点对点信道。 这种信道使用一对一的点对点通信方式。
    
*   广播信道。 这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发。
    

.  
·

3.2 点对点协议 PPP
-------------

*   现在全世界使用得最多的数据链路层协议是**点对点协议** PPP (Point-to-Point Protocol)。
    
*   用户使用拨号电话线接入因特网时，一般都是使用 PPP 协议。
    
    **用户到 ISP 的链路使用 PPP 协议**  
    ![](https://img-blog.csdnimg.cn/20200426211558866.png)
    

### 3.2.1 PPP 协议的特点

**PPP 协议应满足的需求**

*   简单——这是首要的要求
*   封装成帧
*   透明性
*   多种网络层协议
*   多种类型链路
*   差错检测
*   检测连接状态
*   最大传送单元
*   网络层地址协商
*   数据压缩协商

·

**PPP 协议不需要的功能**

*   纠错
*   流量控制
*   序号
*   多点线路
*   半双工或单工链路

**PPP 协议的组成**

*   1992 年制订了 PPP 协议。经过 1993 年和 1994 年的修订，现在的 PPP 协议已成为因特网的正式标准 [RFC 1661]。
    *   PPP 协议有三个组成部分
    *   一个将 IP 数据报封装到串行链路的方法。
    *   链路控制协议 LCP (Link Control Protocol)。
    *   网络控制协议 NCP (Network Control Protocol)。  
        

.  
.

### 3.2.2 PPP 协议的帧格式

*   标志字段 F = 0x7E （符号 “0x” 表示后面的字符是用十六进制表示。十六进制的 7E 的二进 - - 制表示是 01111110）。
*   地址字段 A 只置为 0xFF。地址字段实际上并不起作用。
*   控制字段 C 通常置为 0x03。
*   PPP 是面向字节的，所有的 PPP 帧的长度都是整数字节。  
    ![](https://img-blog.csdnimg.cn/20200427080007332.png)

**透明传输问题**

*   当 PPP 用在同步传输链路时，协议规定采用硬件来完成比特填充（和 HDLC 的做法一样）。
*   当 PPP 用在异步传输时，就使用一种特殊的 字符填充法 。

**字符填充**

*   将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D, 0x5E)。
    
*   若信息字段中出现一个 0x7D 的字节, 则将其转变成为 2 字节序列 (0x7D, 0x5D)。
    
*   若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变。
    

.  
**零比特填充**

*   PPP 协议用在 SONET/SDH 链路时，是使用同步传输（一连串的比特连续传送）。这时 PPP 协议采用零比特填充方法来实现透明传输。
    
*   在发送端，只要发现有 5 个连续 1，则立即填入一个 0。接收端对帧中的比特流进行扫描。每当发现 5 个连续 1 时，就把这 5 个连续 1 后的一个 0 删除。  
    ![](https://img-blog.csdnimg.cn/2020042708083468.png)  
    .  
    .  
    **不提供使用序号和确认 的可靠传输**
    
*   PPP 协议之所以不使用序号和确认机制是出于以下的考虑：
    
    *   在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。
        
    *   在因特网环境下，PPP 的信息字段放入的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。
        
    *   帧检验序列 FCS 字段可保证无差错接受。  
        .  
        .
        

### 3.2.3 PPP 协议的工作状态

*   当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。
    
*   PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。
    
*   这些分组及其响应选择一些 PPP 参数，和进行网络层配置，NCP 给新接入的 PC 机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。
    
*   通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。  
    ![](https://img-blog.csdnimg.cn/20200427081935529.png)  
    .  
    .
    

3.3 使用广播信道的数据链路层 (局域网)
----------------------

### 3.3.1 局域网的数据链路层

局域网最主要的特点是：网络为一个单位所拥有，且地理范围和站点数目均有限。

局域网具有如下的一些主要优点：

*   具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。
    
*   便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。
    
*   提高了系统的可靠性、可用性和残存性。  
    ![](https://img-blog.csdnimg.cn/20200427082103326.png)
    

.  
.  
**媒体共享技术**

静态划分信道

*   频分复用
*   时分复用
*   波分复用
*   码分复用

动态媒体接入控制（多点接入）

*   随机接入
*   受控接入 ，如多点线路探询 (polling)，或轮询。

> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/LeeQiang8023/article/details/105778162)

### 计算网络原理 第三章 数据链路层（二）

*   *   [3.3.2 认识以太网](#332_3)
    *   *   [以太网特点](#_4)
        *   [CSMA/CD](#CSMACD_17)
    *   [3.4 使用广播信道的以太网](#34__101)
    *   *   [3.4.1 以太局域网（以太网）基本概念](#341_102)
        *   [3.4.2 拓扑](#342_148)
        *   [3.4.3 以太网的信道利用率](#343_176)
        *   [3.4.4 以太网的 MAC 层](#344MAC_216)

.

.

3.3.2 认识以太网
-----------

### 以太网特点

最初的以太网是将许多计算机都连接到一根总线上。当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。  
![](https://img-blog.csdnimg.cn/20200427090241654.gif)

*   总线上的每一个工作的计算机都能检测到 B 发送的数据信号。
    
*   由于只有计算机 D 的地址与数据帧首部写入的地址一致，因此只有 D 才接收这个数据帧。
    
*   其他所有的计算机（A, C 和 E）都检测到不是发送给它们的数据帧，因此就丢弃这个数据帧而不能够收下来。
    
*   具有广播特性的总线上实现了一对一的通信。
    

.  
.

### CSMA/CD

**载波监听多点接入** **/** **碰撞检测** **CSMA/CD**

*   CSMA/CD 表示 Carrier Sense Multiple Access with Collision Detection。
    
    *   “多点接入” 表示许多计算机以多点接入的方式连接在一根总线上。
        
    *   “载波监听” 是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。
        
*   总线上并没有什么 “载波”。因此， “载波监听” 就是用电子技术检测总线上有没有其他计算机发送的数据信号。
    

.

**碰撞检测**

*   “碰撞检测” 就是计算机边发送数据边检测信道上的信号电压大小。
    
*   当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（互相叠加）。
    
*   当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。
    
*   所谓 “碰撞” 就是发生了冲突。因此 “碰撞检测” 也称为“冲突检测”。
    

.

**检测到碰撞后**

*   在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。
    
*   每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。
    

![](https://img-blog.csdnimg.cn/20200427111030400.gif)  
![](https://img-blog.csdnimg.cn/20200427130751828.gif)

**重要特性**

*   使用 CSMA/CD 协议的以太网不能进行全双工通信而只能进行双向交替通信（半双工通信）。
    
*   每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。
    
*   这种发送的**不确定性**使整个以太网的平均通信量远小于以太网的最高数据率。
    

.

****争用期****

*   最**先发送**数据帧的站，在发送数据帧后至多经过时间 2t （两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。
    
*   经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。
    
*   以太网的急用期
    
    *   以太网的端到端往返时延 2t 称为争用期，或碰撞窗口。通常，取 51.2 ms 为争用期的长度。
        
    *   对于 10 Mb/s 以太网，在争用期内可发送 512 bit，即 64 字节。
        
*   以太网在发送数据时，若前 64 字节未发生冲突，则后续的数据就不会发生冲突。
    
*   最短有效帧长
    
    *   如果发生冲突，就一定是在发送的前 64 字节之内。
        
    *   由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。
        
    *   以太网规定了最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧。
        

.

.

**二进制指数类型退避算法**

*   发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。
    
    *   确定基本退避时间，一般是取为争用期 2_t_。
        
    *   定义重传次数 _k_ ，_k_ ≤10，即  
        _k_ = Min[重传次数, 10]
        
    *   从整数集合 [0,1,…, (2_k_ -1)] 中随机地取出一个数，记为 _r_。重传所需的时延就是 _r_ 倍的基本退避时间。
        
    *   当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。
        
    
    .  
    .
    

3.4 使用广播信道的以太网
--------------

### 3.4.1 以太局域网（以太网）基本概念

.  
**以太网两个标准**

DIX Ethernet V2 是世界上第一个局域网产品（以太网）的规约。

*   IEEE 的 802.3 标准。
    
*   DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别，因此可以将 802.3 局域网简称为 “以太网”。
    
*   严格说来，“以太网” 应当是指符合 DIX Ethernet V2 标准的局域网
    

.  
**以太网与数据链路层的两个子层**

*   为了使数据链路层能更好地适应多种局域网标准，802 委员会就将局域网的数据链路层拆成两个子层：
    
    *   逻辑链路控制 LLC (Logical Link Control) 子层
        
    *   媒体接入控制 **MAC** (Medium Access Control) 子层。
        
    *   与接入到传输媒体有关的内容都放在 MAC 子层，而 LLC 子层则与传输媒体无关，不管采用何种协议的局域网对 LLC 子层来说都是透明的 。
        
    *   由于 TCP/IP 体系经常使用的局域网是 DIX Ethernet V2 而不是 802.3 标准中的几种局域网，因此现在 802 委员会制定的逻辑链路控制子层 LLC（即 802.2 标准）的作用已经不大了。
        
    *   很多厂商生产的适配器上就**仅装有 MAC 协议**而没有 LLC 协议。
        
    
    .  
    **以太网提供的服务**
    
*   以太网提供的服务是不可靠的交付，即尽**最大努力的交付**。
    
*   当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。差错的纠正由高层来决定。
    
*   如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。
    

.

**曼彻斯特编码**

> 以太网发送的数据都使用曼彻斯特编码。为什么要编码？  
> 曼彻斯特编码：以半个符号宽的**先负后正**（1、0）的脉冲代表数字信号 1，而以 半个符号的**先正后负**的脉冲（0、1）代表数字信号 0。目前最广泛应用的以太局域网，在数据传输时就采用这种数字编码方式。

![](https://img-blog.csdnimg.cn/20200427145622718.png)

.  
.

### 3.4.2 拓扑

**星型拓扑**

*   传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。不用电缆而使用无屏蔽双绞线。每个站需要用两对双绞线，分别用于发送和接收
    
*   这种以太网采用星形拓扑，在星形的中心则增加了一种可靠性非常高的设备，叫做 ** 集线器 (**hub) 。  
    ![](https://img-blog.csdnimg.cn/20200427151144692.png)  
    **集线器的一些特点**
    
*   集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。集线器使用了大规模集成电路芯片，因此这样的硬件设备的可靠性已大大提高了。
    
*   使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 **CSMA/CD 协议**，并共享逻辑上的总线。
    
*   集线器很像一个多接口的转发器，工作在物理层。  
    ![](https://img-blog.csdnimg.cn/20200427151740903.png)
    

****10Base-T****

*   **10BASE-T** 的通信距离稍短，每个站到集线器的距离不超过 100 m。
    
*   这种 10 Mb/s 速率的无屏蔽双绞线星形网的出现，既降低了成本，又提高了可靠性。
    
*   **10BASE-T** 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑，它为以太网在局域网中的统治地位奠定了牢固的基础。
    

其他：100Base-FX、100Base-T 和 100Base-T4….

.  
.

### 3.4.3 以太网的信道利用率

**以太网的信道利用率**

以太网的信道被占用的情况：

*   争用期长度为 2_t_，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。
*   帧长为 _L_ (bit)，数据发送速率为 _C_ (b/s)，因而帧的发送时间为 _L_/_C_ = _T_0 (s)。

.

• **以太网的信道利用率** **(cont.)**

• 一个帧从开始发送，经可能发生的碰撞后，将再重传数次，到发送成功且信道转为空闲 (即再经过时间 t 使得信道上无信号在传播) 时为止，是发送一帧所需的平均时间。  
![](https://img-blog.csdnimg.cn/20200427161718315.png)  
**以太网的信道利用率: 参数 a**

*   要提高以太网的信道利用率，就必须减小 t 与 T0 之比。在以太网中定义了参数 a，它是以太网单程端到端时延 t 与帧的发送时间 T0 之比： ![](https://img-blog.csdnimg.cn/20200427161858606.png)
    
*   a→0 表示一发生碰撞就立即可以检测出来，并立即停止发送，因而信道利用率很高。
    
*   a 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道 利用率明显降低。
    

.  
.  
. **以太网的信道利用率：最大值**

*   对以太网参数的要求
    
    *   当数据率一定时，以太网的连线的长度受到限制，否则 _t_ 的数值会太大
        
    *   以太网的帧长不能太短，否则 _T_0 的值会太小，使 _a_ 值太大
        
*   信道利用率的最大值
    

–在理想化的情况下，以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA/CD，而是需要使用一种特殊的调度方法），即总线一旦空闲就有某一个站立即发送数据。

–发送一帧占用线路的时间是 _T_0 + _t_，而帧本身的发送时间是 _T_0。于是我们可计算出理想情况下的极限信道利用率 S*max 为：

![](https://img-blog.csdnimg.cn/20200427162200326.png)

.  
.

### 3.4.4 以太网的 MAC 层

**MAC ****层的硬件地址**** (MAC ****地址****)**

*   在局域网中，硬件地址又称为物理地址，或 MAC 地址。
    
*   802 标准所说的 “地址” 严格地讲应当是每一个站的 “名字” 或标识符。
    
*   但鉴于大家都早已习惯了将这种 48 位的 “名字” 称为“地址”，所以本书也采用这种习惯用法，尽管这种说法并不太严格。
    
    *   IEEE 的注册管理机构 RA 负责向厂家分配地址字段的前三个字节 (即高位 24 位)。
        
    *   地址字段中的后三个字节 (即低位 24 位) 由厂家自行指派，称为扩展标识符，必须保证生产出的适配器没有重复地址。
        
    *   一个地址块可以生成 224 个不同的地址。这种 48 位地址称为 MAC-48，它的通用名称是 EUI-48。
        
    *   “MAC 地址” 实际上就是适配器地址或适配器标识符 EUI-48。
        
    
    .
    

**适配器检查** **MAC** **地址**

*   适配器从网络上每收到一个 MAC 帧就首先用硬件检查 MAC 帧中的 MAC 地址.
    
    *   如果是发往本站的帧则收下，然后再进行其他的处理。
        
    *   –否则就将此帧丢弃，不再进行其他的处理。
        
*   “发往本站的帧” 包括以下三种帧：
    
    *   单播 (unicast) 帧（一对一）
        
    *   广播 (broadcast) 帧（一对全体）
        
    *   多播 (multicast) 帧（一对多）
        

.

**MAC 帧格式**

• 常用的以太网 MAC 帧格式有两种标准 ：

*   DIX Ethernet V2 标准
    
*   IEEE 的 802.3 标准
    

• **最常用的 MAC 帧是以太网 V2 的格式**。  
![](https://img-blog.csdnimg.cn/20200427170459483.png)  
![](https://img-blog.csdnimg.cn/20200427170602609.png)![](https://img-blog.csdnimg.cn/20200427170746138.png)

> 类型字段用来标志**上一层**使用的是什么协议，  
> 以便把收到的 MAC 帧的数据上交给上一层的这个协议。

![](https://img-blog.csdnimg.cn/20200427170852881.png0)

> 数据字段的正式名称是 **MAC** 客户数据字段  
> 最小长度 64 字节 - 18 字节的首部和尾部 = 数据字段的最小长度

![](https://img-blog.csdnimg.cn/20200427171121477.png)  
![](https://img-blog.csdnimg.cn/20200427171138351.png)  
.

.  
**无效的** **MAC** **帧**

*   数据字段的长度与长度字段的值不一致；
    
*   帧的长度不是整数个字节；
    
*   用收到的帧检验序列 FCS 查出有差错；
    
*   数据字段的长度不在 46 ~ 1500 字节之间。
    
*   有效的 MAC 帧长度为 64 ~ 1518 字节之间。
    
*   对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。
    

.  
.  
**帧间最小间隔**

*   帧间最小间隔为 9.6 ms，相当于 96 bit 的发送时间。
    
*   一个站在检测到总线开始空闲后，还要等待 9.6 ms 才能再次发送数据。
    
*   这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。

## 来源文章

- [计算机网络原理笔记 第三章 数据链路层（一）](https://blog.csdn.net/LeeQiang8023/article/details/105758267)
- [计算机网络原理笔记 第三章 数据链路层（二）](https://blog.csdn.net/LeeQiang8023/article/details/105778162)